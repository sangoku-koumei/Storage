---
tags: [00_WorkLog, Kotosekai, Tool, Python, iOS, Bible]
date: 2026-01-19
link: [[00_知識マップ|⬅️ 知識マップへ戻る]]
---
# 2026-01-19_作業メモ

本日は、iOS小説朗読アプリ「ことせかい」の精神的後継となるアプリ開発に向けた詳細仕様策定（バイブル作成）と、コアロジック検証用のプロトタイプツール作成を行いました。

## 1. 作成したバイブル
### [[Vol.54_iOSアプリ開発・小説朗読ツール完全攻略バイブル_深層対話]]
- **内容**: 複数の専門家ペルソナによる深層対話形式で、アプリのMVP要件、UX設計、技術スタック、法務リスクを徹底議論した記録。
- **ポイント**:
    - 「なろう」「カクヨム」の2大サイト対応
    - 「続きから一発再生」と「段落ハイライト」による没入感
    - スリープタイマーの「停止でリセット」仕様
    - サーバーを持たない「ローカル完結型」によるリスク回避

### [[Original_IOS_Novel_App_Dev_Log]]
- **内容**: 議論の元となったオリジナルのログファイル。
- **更新**: 「00ルール」に基づき、タグ・日付・リンクのメタデータを付与しました。

## 2. 作成したツール (Kotosekai Prototype)
Windows環境で即座にロジック検証を行うため、PythonによるMVPツールセットを作成しました。
保存場所: `00/Kotosekai_Prototype/`

### 📂 構成ファイル
すべてのファイルに標準の「00ルール（YAMLフロントマター）」を適用済みです。

1.  **`main.py`** (エントリーポイント)
    - **機能**: ユーザーからURLを受け取り、下記モジュールを連携させて「取得→整形→再生」を一括実行します。
    - **使い方**:
        ```bash
        python main.py
        ```
        実行後、プロンプトに従って小説のURL（なろう/カクヨム）を入力してください。

2.  **`scraper.py`** (Webスクレイパー)
    - **機能**: 指定されたURLが「小説家になろう」か「カクヨム」かを自動判別し、タイトルと本文（HTML）を抽出します。
    - **特徴**: `BeautifulSoup4` を使用。サイトごとのDOM構造の違いを吸収します。

3.  **`preprocessor.py`** (テキスト整形エンジン)
    - **機能**: 読み上げに適さない記号や、HTML由来のノイズを除去します。
    - **処理内容**:
        - ルビの除去（または平文化）
        - 連なる記号（……、ーー）の正規化
        - 不要な空行の削除
        - **段落分割**: テキストを空行区切りでリスト化し、後続のTTSが「段落単位」で処理できるようにします。

4.  **`tts_engine.py`** (音声合成エンジン)
    - **機能**: テキストを音声ファイル（MP3）に変換・再生します。
    - **技術**: `edge-tts` (Microsoft Edgeの高品質オンラインTTS) を使用。非常に自然な日本語（NanamiNeuralなど）で読み上げます。
    - **注意**: 実行にはインターネット接続が必要です。

## 3. 次のステップ
- このプロトタイプで「心地よい読み上げ」ができることが検証でき次第、iOS/Swiftでの本番アプリ実装（バイブルのフェーズ1）に移行します。
