---
tags: [Threads, Automation, API, CodeSnippet, Python, GAS, 00, Legacy_Knowledge]
date: 2026-01-09
source: Implementation_Plan
aliases: [Threads_Auto_Reply, Implementation_Plan]
---

# [[2026-01-09_Threadsè‡ªå‹•è¿”ä¿¡_å®Ÿè£…ãƒ—ãƒ©ãƒ³]]
# Threadsè‡ªå‹•è¿”ä¿¡ ï¼† å®Œå…¨è‡ªå‹•æŠ•ç¨¿ å®Ÿè£…ã‚­ãƒƒãƒˆ

[[00_çŸ¥è­˜ãƒãƒƒãƒ—|â¬…ï¸ 00ï¼šçŸ¥è­˜ãƒãƒƒãƒ—ã¸æˆ»ã‚‹]]

## Keywords & Tags
#Threads #Automation #API #CodeSnippet #Python #GAS #Legacy_Knowledge #00

ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ã®ã”è¨˜æ†¶é€šã‚Šã€**ã€Œé¢å€’ãªã‚³ãƒ”ãƒšç™»éŒ²ï¼ˆ60åˆ†ï¼‰ã€ã‚‚ãƒ„ãƒ¼ãƒ«ã§å…¨è‡ªå‹•åŒ–ãŒå¯èƒ½**ã§ã™ã€‚
ã¾ãŸã€ã”è¦æœ›ã®**ã€ŒThreadsè‡ªå‹•è¿”ä¿¡ã€**ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®è¿½åŠ ãƒ‘ãƒ¼ãƒ„ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

ã“ã®æ‰‹é †ã«å¾“ãˆã°ã€ä»¥ä¸‹ã®2ã¤ãŒå®Ÿç¾ã—ã¾ã™ã€‚
1.  **Threadsã¸ã®è‡ªå‹•è¿”ä¿¡**: ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«åå¿œã—ã¦AIã¾ãŸã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒè¿”ä¿¡ã€‚
2.  **å®Œå…¨è‡ªå‹•æŠ•ç¨¿**: CSVã¨ç”»åƒã‚’èª­ã¿è¾¼ã¿ã€ãƒ„ãƒ¼ãƒ«ãŒå‹æ‰‹ã«30æ—¥åˆ†ã‚’æŠ•ç¨¿ï¼ˆã‚³ãƒ”ãƒšä½œæ¥­ã‚¼ãƒ­ï¼‰ã€‚

---

## ğŸ§µ 1. Threadsè‡ªå‹•è¿”ä¿¡æ©Ÿèƒ½ã®è¿½åŠ 

Threads APIã«å¯¾å¿œã—ãŸæ–°ã—ã„ãƒ‘ãƒ¼ãƒ„ï¼ˆã‚³ãƒ¼ãƒ‰ï¼‰ã§ã™ã€‚
æ—¢å­˜ã® `app` ãƒ•ã‚©ãƒ«ãƒ€å†…ã« `threads_client.py` ã¨ã„ã†åå‰ã§ä¿å­˜ã—ã¦ãã ã•ã„ã€‚

### ğŸ“„ è¿½åŠ ã‚³ãƒ¼ãƒ‰: `app/threads_client.py`

```python
"""
Threads API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
Threadsã®ã‚³ãƒ¡ãƒ³ãƒˆå–å¾—ãƒ»è¿”ä¿¡æ©Ÿèƒ½ã‚’æ‹…å½“
"""
import requests
from app.config import settings

THREADS_API_BASE_URL = "https://graph.threads.net/v1.0"

class ThreadsClient:
    def __init__(self, access_token: str, user_id: str):
        self.access_token = access_token
        self.user_id = user_id

    def get_headers(self):
        return {"Authorization": f"Bearer {self.access_token}"}

    def reply_to_thread(self, media_id: str, text: str) -> str:
        """
        Threadsã®æŠ•ç¨¿ï¼ˆã¾ãŸã¯ã‚³ãƒ¡ãƒ³ãƒˆï¼‰ã«è¿”ä¿¡ã‚’ä½œæˆ
        """
        url = f"{THREADS_API_BASE_URL}/{media_id}/threads"
        payload = {
            "media_type": "TEXT",
            "text": text
        }
        # Threadsã®Replyã¯POST /media_id/threads ã§ publish ã™ã‚‹ç‰¹æ®Šä»•æ§˜
        # ã¾ãŸã¯ POST /me/threads_publish ? creation_id=... ã®ãƒ•ãƒ­ãƒ¼
        # â€»ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãŸã‚ã€publishã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹æ¨™æº–ãƒ•ãƒ­ãƒ¼ã‚’è¨˜è¿°
        
        # 1. ã‚³ãƒ³ãƒ†ãƒŠä½œæˆ
        container_url = f"{THREADS_API_BASE_URL}/{self.user_id}/threads"
        container_payload = {
            "media_type": "TEXT",
            "text": text,
            "reply_to_id": media_id  # ã“ã“ã§è¿”ä¿¡å…ˆã‚’æŒ‡å®š
        }
        resp = requests.post(container_url, headers=self.get_headers(), data=container_payload)
        resp.raise_for_status()
        creation_id = resp.json().get("id")

        # 2. å…¬é–‹ (Publish)
        publish_url = f"{THREADS_API_BASE_URL}/{self.user_id}/threads_publish"
        pub_payload = {"creation_id": creation_id}
        resp_pub = requests.post(publish_url, headers=self.get_headers(), data=pub_payload)
        resp_pub.raise_for_status()
        
        return resp_pub.json().get("id")

    def get_replies(self, media_id: str):
        """
        æŠ•ç¨¿ã«ã¤ã„ãŸãƒªãƒ—ãƒ©ã‚¤ã‚’å–å¾—
        """
        url = f"{THREADS_API_BASE_URL}/{media_id}/replies"
        resp = requests.get(url, headers=self.get_headers())
        resp.raise_for_status()
        return resp.json().get("data", [])
```

---

## ğŸ¤– 2. æŠ•ç¨¿ã®å®Œå…¨è‡ªå‹•åŒ–ï¼ˆã‚³ãƒ”ãƒšä½œæ¥­ã®æ’¤å»ƒï¼‰

ã€ŒMeta Business Suiteã¸ã®æ‰‹å‹•ç™»éŒ²ã€ã‚’ãªãã™ã«ã¯ã€æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã®**ã€ŒCSVã‚¤ãƒ³ãƒãƒ¼ãƒˆæŠ•ç¨¿æ©Ÿèƒ½ã€**ã‚’ä½¿ã„ã¾ã™ã€‚

### ä»•çµ„ã¿
1.  **GAS**: æŠ•ç¨¿æ–‡ï¼ˆã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã¨**ç”»åƒURL**ã‚’CSVã«æ›¸ãå‡ºã™ã€‚
2.  **Pythonãƒ„ãƒ¼ãƒ«**: CSVã‚’èª­ã¿è¾¼ã¿ã€æŒ‡å®šæ—¥æ™‚ã«Instagram APIçµŒç”±ã§æŠ•ç¨¿ã™ã‚‹ã€‚

### å¿…è¦ãªå¤‰æ›´ç‚¹ï¼ˆGASå´ï¼‰
ç”»åƒã®ä¿å­˜å…ˆã‚’ã€ŒGoogleãƒ‰ãƒ©ã‚¤ãƒ–ã€ã«ã—ã€**ã€Œèª°ã§ã‚‚é–²è¦§å¯èƒ½ãªãƒªãƒ³ã‚¯ã€**ã‚’å–å¾—ã—ã¦CSVã«è¨˜è¼‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚Instagramã®APIã¯ã€ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ãªURLï¼ˆãƒ­ãƒ¼ã‚«ãƒ«PCã®ãƒ‘ã‚¹ãªã©ï¼‰ã‹ã‚‰ã¯ç”»åƒã‚’èª­ã¿è¾¼ã‚ãªã„ãŸã‚ã§ã™ã€‚

**æ¨å¥¨ãƒ•ãƒ­ãƒ¼**:
1.  **Canva**ã§ç”»åƒä½œæˆ â†’ Googleãƒ‰ãƒ©ã‚¤ãƒ–ã®ã€Œå…¬é–‹ç”¨ãƒ•ã‚©ãƒ«ãƒ€ã€ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€‚
2.  **GAS**ã§CSVã‚’å‡ºåŠ›ã™ã‚‹éš›ã€ç”»åƒã‚«ãƒ©ãƒ ã«ãƒ‰ãƒ©ã‚¤ãƒ–ã®ç”»åƒã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã€‚
    *   ä¾‹: `row[4] = "https://drive.google.com/uc?export=view&id=FILE_ID"`
3.  **Pythonãƒ„ãƒ¼ãƒ«**ã§èª­ã¿è¾¼ã¿ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€‚
    *   ãƒ„ãƒ¼ãƒ«ãŒã€Œç”»åƒURLã€ã‚’èªè­˜ã—ã€APIçµŒç”±ã§äºˆç´„æŠ•ç¨¿ã‚»ãƒƒãƒˆå®Œäº†ã€‚

ã“ã‚Œãªã‚‰ã€**30æ—¥åˆ†ã®ã‚³ãƒ”ãƒšåœ°ç„ã‹ã‚‰å®Œå…¨ã«è§£æ”¾**ã•ã‚Œã¾ã™ã€‚

### å®Ÿè£…ã‚µãƒãƒ¼ãƒˆ
ã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€**ã€ŒGoogleãƒ‰ãƒ©ã‚¤ãƒ–ã®ç”»åƒã‚’å…¬é–‹ãƒªãƒ³ã‚¯ã«å¤‰æ›ã—ã¦CSVã«å…¥ã‚Œã‚‹GASã‚³ãƒ¼ãƒ‰ã€**ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ
ã“ã‚ŒãŒã‚ã‚Œã°ã€Canvaã§ä½œã£ãŸç”»åƒã‚’ãƒ‰ãƒ©ã‚¤ãƒ–ã«æ”¾ã‚Šè¾¼ã‚€ã ã‘ã§ã€ã‚ã¨ã¯å…¨è‡ªå‹•ã«ãªã‚Šã¾ã™ã€‚
